@model BlogPost
@{
    ViewData["Title"] = "Delete Blog Post - Admin";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow">
                <div class="card-header bg-danger text-white">
                    <h2 class="mb-0"><i class="fas fa-trash"></i> Delete Blog Post</h2>
                </div>
                <div class="card-body">
                    <div class="alert alert-warning" role="alert">
                        <h4 class="alert-heading"><i class="fas fa-exclamation-triangle"></i> Warning!</h4>
                        <p>You are about to permanently delete this blog post. This action cannot be undone.</p>
                        <hr>
                        <p class="mb-0">Are you sure you want to continue?</p>
                    </div>

                    <!-- Post Preview -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Post to be deleted:</h5>
                        </div>
                        <div class="card-body">
                            <h3 class="card-title">@Model.Title</h3>
                            @if (!string.IsNullOrEmpty(Model.Summary))
                            {
                                <p class="card-text"><strong>Summary:</strong> @Model.Summary</p>
                            }
                            @if (!string.IsNullOrEmpty(Model.Category))
                            {
                                <p class="card-text"><strong>Category:</strong> <span class="badge bg-primary">@Model.Category</span></p>
                            }
                            <div class="row">
                                <div class="col-md-6">
                                    <p class="card-text"><small class="text-muted"><strong>Author:</strong> @Model.AuthorName</small></p>
                                    <p class="card-text"><small class="text-muted"><strong>Created:</strong> @Model.CreatedDate.ToString("MMM dd, yyyy")</small></p>
                                </div>
                                <div class="col-md-6">
                                    <p class="card-text">
                                        <small class="text-muted">
                                            <strong>Status:</strong>
                                            @if (Model.IsPublished)
                                            {
                                                <span class="badge bg-success">Published</span
                                                >
                                            }
                                            else
                                            {
                                                <span class="badge bg-warning">Draft</span>
                                            }
                                        </small>
                                    </p>
                                    <p class="card-text"><small class="text-muted"><strong>Views:</strong> @Model.ViewCount</small></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <a href="@Url.Action("Blog", "Admin")" class="btn btn-outline-secondary me-2">
                                <i class="fas fa-arrow-left"></i> Back to Blog List
                            </a>
                            <a href="@Url.Action("EditBlog", "Admin", new { id = Model.Id })" class="btn btn-outline-primary">
                                <i class="fas fa-edit"></i> Edit Instead
                            </a>
                        </div>
                        <div>
                            <form method="post" asp-action="DeleteBlog" asp-route-id="@Model.Id" style="display: inline;">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-danger btn-lg" onclick="return confirm('Are you absolutely sure you want to delete this blog post? This action cannot be undone.')">
                                    <i class="fas fa-trash"></i> Yes, Delete Post
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Add extra confirmation for delete action
        document.querySelector('form').addEventListener('submit', function(e) {
            const confirmed = confirm('This is your final chance. Are you absolutely certain you want to delete this blog post forever?');
            if (!confirmed) {
                e.preventDefault();
                return false;
            }
        });
    </script>
}